
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../bash-scripting/">
      
      
        <link rel="next" href="../aws-continuous-delivery/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>Netflix-ish Deployment - CloudSpace DevOps Accelerator Program (DAP)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fad675c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#netflix-ish-deployment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CloudSpace DevOps Accelerator Program (DAP)" class="md-header__button md-logo" aria-label="CloudSpace DevOps Accelerator Program (DAP)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CloudSpace DevOps Accelerator Program (DAP)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Netflix-ish Deployment
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CloudSpace DevOps Accelerator Program (DAP)" class="md-nav__button md-logo" aria-label="CloudSpace DevOps Accelerator Program (DAP)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CloudSpace DevOps Accelerator Program (DAP)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevOps Projects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            DevOps Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-static-web-hosting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Static Web Hosting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../containerization-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containerization Fun
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serverless-on-aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serverless on AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ansible-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ansible Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../terraform-on-aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terraform on AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bash-scripting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bash Scripting Party
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Netflix-ish Deployment
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Netflix-ish Deployment
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-overview" class="md-nav__link">
    <span class="md-ellipsis">
      üöÄ Project Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      üîß Problem Statement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#techonology-stack" class="md-nav__link">
    <span class="md-ellipsis">
      üíΩ Techonology Stack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      üìå Architecture Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      üö¶ Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö¶ Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      üåü Prerequisites
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      üìã Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-setup-ec2-instance" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-1-Setup-EC2-instance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-setup-sonarqube" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-2-Setup-SonarQube
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-integration-sonarqube-with-github-actions" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-3-Integration-SonarQube-with-GitHub-Actions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-scanning-file-with-trivy" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-4-Scanning-file-with-Trivy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-push-docker-container-to-dockerhub" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-5-Push-Docker-container-to-Dockerhub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-create-tmdb-api-key" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-6-Create-TMDB-API-Key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-add-a-self-hosted-runner-to-ec2" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-7-Add-a-self-hosted-runner-to-EC2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-final-workflow-to-run-the-container" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-8-Final-workflow-to-run-the-container
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-continuous-delivery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Continuous Delivery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../microservices-bookStore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Microservices BookStore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../java-web-app-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java Webapp Deployment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    More Fun Projects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            More Fun Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevOps
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevOps Beginner
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            DevOps Beginner
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dockerbeginning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Beginner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dockercomposebeginning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Compose Beginner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Kubernetes-Minikube%20Cluster%20Beginner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes-Minikube Cluster Beginner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CI-CD-Beginner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CI/CD Pipeline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Monitoring-with-Prometheus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring with Prometheus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Terraform-Starter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terraform Starter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ansible-Playbook-Library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ansible Playbook Library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Logging-with-ELK-Stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging with ELK Stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Scan-Docker-Container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scan Docker container
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-lambda-s3-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Lambda S3 Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-lambda-xray/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Lambda Xray
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-pet-rekognition-ecr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Pet Rekognition Ecr
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-lex-lambda-rds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Lex Lambda Rds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-dynamodb-lambda-trigger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Dynamodb Lambda Trigger
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevOps Expert
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            DevOps Expert
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2_1" id="__nav_4_1_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevOps Large Projects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2_1">
            <span class="md-nav__icon md-icon"></span>
            DevOps Large Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AWS%20Photo%20Gallery%20Application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS DevOps Expert
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Open%20Source%20Photo%20Gallery%20Application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Open Source DevOps Expert
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Banking%20Web%20Application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Balancing Expert
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AWS%20E-Commerce%20Application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Full Stack DevOps Expert
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Real-Time%20Chat%20Application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Real-Time Application DevOps Expert
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Solution Architect
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Solution Architect
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_1" id="__nav_4_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Solution Architect Projects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            Solution Architect Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-api-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Api Gateway
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-cloudtrail-log-file-integrity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Cloudtrail Log File Integrity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-control-tower/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Control Tower
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-cognito-web-identity-federation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Cognito Web Identity Federation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-dms-database-migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Dms Database Migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-patch-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Patch Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-efs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Efs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-elastic-disaster-recovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Elastic Disaster Recovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-global-accelerator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Global Accelerator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-iam-scp-permissions-boundary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Iam Scp Permissions Boundary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-macie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Macie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-systems-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Systems Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-video-on-demand/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Video On Demand
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-vpc-flow-logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Vpc Flow Logs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-waf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Waf
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-overview" class="md-nav__link">
    <span class="md-ellipsis">
      üöÄ Project Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      üîß Problem Statement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#techonology-stack" class="md-nav__link">
    <span class="md-ellipsis">
      üíΩ Techonology Stack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      üìå Architecture Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      üö¶ Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö¶ Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      üåü Prerequisites
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      üìã Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-setup-ec2-instance" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-1-Setup-EC2-instance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-setup-sonarqube" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-2-Setup-SonarQube
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-integration-sonarqube-with-github-actions" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-3-Integration-SonarQube-with-GitHub-Actions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-scanning-file-with-trivy" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-4-Scanning-file-with-Trivy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-push-docker-container-to-dockerhub" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-5-Push-Docker-container-to-Dockerhub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-create-tmdb-api-key" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-6-Create-TMDB-API-Key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-add-a-self-hosted-runner-to-ec2" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-7-Add-a-self-hosted-runner-to-EC2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-final-workflow-to-run-the-container" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Step-8-Final-workflow-to-run-the-container
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="netflix-ish-deployment">Netflix ish deployment</h1>
<p>Automate the Process of deloying a containerized application</p>
<h2 id="project-overview">üöÄ Project Overview</h2>
<p>This project aims to automate the deployment of an application using CI/CD tools. Here are the key feature :</p>
<ul>
<li>
<p>GitHub Actions Integration: Utilize GitHub Actions for seamless automation of the CI/CD pipeline, facilitating continuous integration and deployment.</p>
</li>
<li>
<p>Docker Containerization: Containerize the Netflix-like application and its dependencies using Docker, ensuring simplified deployment and scalability.</p>
</li>
<li>
<p>Trivy Integration: Integrate Trivy for vulnerability scanning of Docker images, enabling early detection and mitigation of security vulnerabilities.</p>
</li>
<li>
<p>SonarQube Integration: Incorporate SonarQube for static code analysis to provide insights into code quality, security, and maintainability.</p>
</li>
<li>
<p>Environment Configuration: Implement configuration management to ensure consistent deployment across different environments.</p>
</li>
</ul>
<h2 id="problem-statement">üîß Problem Statement</h2>
<p>The Automated Deployment of Containerized a Netflix-Like Application project aims to automate the deployment process of a video streaming platform using modern DevOps tools and practices. Leveraging GitHub Actions for CI/CD, Docker for containerization, Trivy for container image vulnerability scanning, and SonarQube for code quality analysis.
GitHub Actions is an integrated continuous integration and continuous deployment (CI/CD) platform provided by GitHub that allows developers to automate various software development workflows. It enables you to create, customize, and share automated tasks, or ‚Äúactions,‚Äù directly within your GitHub repositories. These actions can be triggered by events like code pushes, pull requests, or external inputs, and they can perform tasks such as building, testing, deploying, and more. GitHub Actions simplifies the automation of repetitive tasks, streamlining the software development process and ensuring code quality and consistency by automating various stages of the development lifecycle, ultimately helping teams to collaborate more efficiently and deploy code with confidence.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment2.png" /></p>
<h2 id="techonology-stack">üíΩ Techonology Stack</h2>
<p>‚óè <strong>Server</strong>: EC2</p>
<p>‚óè <strong>Containerization Platform</strong>: Docker</p>
<p>‚óè <strong>CI/CD Platform</strong>: Github Actions</p>
<p>‚óè <strong>Version Control</strong>: Github/Git</p>
<p>‚óè <strong>Code Quality Analysis</strong>: Sonnarqube</p>
<p>‚óè <strong>Security Scanning</strong>: Trivy</p>
<h2 id="architecture-diagram">üìå Architecture Diagram</h2>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment-architecture-diagram.png" /></p>
<h2 id="getting-started">üö¶ Getting Started</h2>
<h3 id="prerequisites">üåü Prerequisites</h3>
<p>Before diving into the project, let‚Äôs ensure that we have the necessary prerequisites.</p>
<ul>
<li>AWS account.</li>
<li>AWS CLI.</li>
<li>Dockerhub account.</li>
<li>Git for cloning the repository.</li>
</ul>
<h2 id="table-of-contents">üìã Table of Contents</h2>
<ul>
<li><a href="#-step-1-setup-ec2-instance">Step-1: Setup EC2 instance</a></li>
<li><a href="#-step-2-setup-sonarqube">Step-2: Setup SonarQube</a></li>
<li><a href="#-step-3-integration-sonarqube-with-github-actions">Step-3: Integration SonarQube with GitHub Actions</a></li>
<li><a href="#-step-4-scanning-file-with-trivy">Step-4: Scanning file with Trivy</a></li>
<li><a href="#-step-5-push-docker-container-to-dockerhub">Step-5: Push Docker container to Dockerhub</a></li>
<li><a href="#-step-6-create-tmdb-api-key">Step-6: Create TMDB API Key</a></li>
<li><a href="#-step-7-add-a-self-hosted-runner-to-ec2">Step-7: Add a self hosted runner to EC2</a></li>
<li><a href="#-step-8-final-workflow-to-run-the-container">Step-8: Final workflow to run the container</a></li>
</ul>
<h2 id="step-1-setup-ec2-instance">‚ú® Step-1-Setup-EC2-instance</h2>
<p>Launch an ‚Äúubuntu (t2.medium) ‚Äú instance and login through ‚Äúputty‚Äù or ‚Äúmobaxtream‚Äù app.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment3.png" /></p>
<h2 id="step-2-setup-sonarqube">‚ú® Step-2-Setup-SonarQube</h2>
<p>Connect to your Ec2 instance using Putty, Mobaxterm or Git bash and install docker on it.</p>
<pre><code class="language-bash">    sudo apt-get update
    sudo apt install docker.io -y
    sudo usermod -aG docker ubuntu
    newgrp docker
    sudo chmod 777 /var/run/docker.sock

</code></pre>
<p>Pull the SonarQube Docker image and run it.
After the docker installation, we will create a Sonarqube container
(Remember to add 9000 ports in the security group).</p>
<pre><code class="language-bash">    docker run -d --name sonar -p 9000:9000 sonarqube:lts-community
</code></pre>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment4.png" /></p>
<p>Now copy the IP address of the ec2 instance</p>
<pre><code class="language-bash">    &lt;ec2-public-ip:9000&gt;
</code></pre>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment5.png" /></p>
<p>Provide the following Login and password:</p>
<pre><code>    login admin
    password admin
</code></pre>
<p>Update your Sonarqube password &amp; This is the Sonarqube dashboard</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment6.png" /></p>
<h2 id="step-3-integration-sonarqube-with-github-actions">‚ú® Step-3-Integration-SonarQube-with-GitHub-Actions</h2>
<p>First, clone the project on github using this <a href="https://github.com/cloudspaceacademy/netflix-inspired-app.git">link</a></p>
<p>Integrating SonarQube with GitHub Actions allows you to automatically analyze your code for quality and security as part of your continuous integration pipeline.</p>
<p>We already have Sonarqube up and running
On Sonarqube Dashboard click on <code>Manually</code></p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment7.png" /></p>
<p>Next, provide a name for your project and provide a Branch name and click on <code>setup</code></p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment8.png" /></p>
<p>On the next page click on With GitHub actions</p>
<p>This will Generate an overview of the Project and provide some instructions to integrate</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment9.png" /></p>
<p>Let‚Äôs Open your GitHub and select your Repository and Click on Settings,</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment10.png" /></p>
<p>Search for Secrets and variables and click on and again click on actions</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment11.png" /></p>
<p>It will open a page like this click on New Repository secret</p>
<p>Now go back to Your Sonarqube Dashboard</p>
<p>Copy SONAR_TOKEN and click on Generate Token</p>
<p>Click on <code>Generate</code></p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment12.png" /></p>
<p>Let‚Äôs copy the Token and add it to GitHub secrets</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment13.png" /></p>
<p>Now go back to GitHub and Paste the copied name for the secret and token</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment14.png" /></p>
<p>Now go back to the Sonarqube Dashboard</p>
<p>Copy the Name and Value</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment15.png" /></p>
<p>Go to GitHub now and paste-like this and click on add secret</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment16.png" /></p>
<p>Our Sonarqube secrets are added and you can see</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment17.png" /></p>
<p>Go to Sonarqube Dashboard and click on continue</p>
<p>Now create your Workflow for your Project. In my case, the Netflix project is built using React Js.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment18.png" /></p>
<p>Now it Generates and workflow for my Project</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment19.png" /></p>
<p>Go back to GitHub. click on Add file and then create a new file.</p>
<p>Go back to the Sonarqube dashboard and copy the file name and content</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment20.png" /></p>
<p>File name is:</p>
<pre><code class="language-bash">    sonar-project.properties
</code></pre>
<p>The content to add to the file is</p>
<pre><code class="language-bash">    sonar.projectKey=Netflix
</code></pre>
<p>Add in GitHub like this</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment21.png" /></p>
<p>Let‚Äôs add our workflow</p>
<p>To do that click on Add file and then click on Create a new file as</p>
<pre><code class="language-bash">    .github/workflows/build.yml  #you can use any name iam using sonar.yml
</code></pre>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment22.png" /></p>
<p>Copy content and add it to the file and Click on commit changes.</p>
<pre><code class="language-bash">    name: Build

    on:
      push:
        branches:
          - main


    jobs:
      build:
        name: Build
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
            with:
              fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis
          - uses: sonarsource/sonarqube-scan-action@master
            env:
              SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
              SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}

</code></pre>
<p>Now workflow is created and Click on ‚ÄúActions‚Äù now</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment23.png" /></p>
<p>Now it‚Äôs automatically started the workflow</p>
<p>Let‚Äôs click on <code>Build</code> and see what are the steps involved</p>
<p>Build complete.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment24.png" /></p>
<p>Go to the Sonarqube dashboard and click on <code>projects</code> and you can see the analysis</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment25.png" /></p>
<p>If you want to see the full report, click on <code>issues</code>.</p>
<h2 id="step-4-scanning-file-with-trivy">‚ú® Step-4-Scanning-file-with-Trivy</h2>
<p>Add this code to your build.yml and Commit changes.</p>
<pre><code>    - name: install trivy
      run: |
        #install trivy
        sudo apt-get install wget apt-transport-https gnupg lsb-release -y
        wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | gpg --dearmor | sudo tee /usr/share/keyrings/trivy.gpg &gt; /dev/null
        echo &quot;deb [signed-by=/usr/share/keyrings/trivy.gpg] https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main&quot; | sudo tee -a /etc/apt/sources.list.d/trivy.list
        sudo apt-get update
        sudo apt-get install trivy -y
        #command to scan files
        trivy fs .

</code></pre>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment26.png" /></p>
<p>It started the workflow build , Click on Build, Analyze and scan , It installed .</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment27.png" /></p>
<p>It installed Trivy version 0.46.0 and scanned files also. See report</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment28.png" /></p>
<h2 id="step-5-push-docker-container-to-dockerhub">‚ú® Step-5-Push-Docker-container-to-Dockerhub</h2>
<p>Create a Personal Access token for your Dockerhub account</p>
<p>Go to docker hub and click on your profile ‚Üí Account settings ‚Üí security ‚Üí New access token</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment29.png" /></p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment30.png" /></p>
<p>It asks for a name Provide a name and click on generate token</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment31.png" /></p>
<p>Copy the token save it in a safe place, and close</p>
<p>Now Go to GitHub again and click on settings , Search for Secrets and variables and click on and again click on actions</p>
<p>Add your Dockerhub username with the secret name as</p>
<pre><code class="language-bash">
    DOCKERHUB_USERNAME   #use your dockerhub username

</code></pre>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment32.png" /></p>
<p>Let‚Äôs add our token also and click on the new repository secret again</p>
<pre><code class="language-bash">
    DOCKERHUB_TOKEN

</code></pre>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment33.png" /></p>
<h2 id="step-6-create-tmdb-api-key">‚ú® Step-6-Create-TMDB-API-Key</h2>
<p>Next, we will create a TMDB API key</p>
<p>Open a new tab in the Browser and search for TMDB</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment34.png" /></p>
<p>Click on the Login on the top right. You will get this page.</p>
<p>You need to create an account here. click on click here. I have an account that‚Äôs why I added my details there.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment35.png" /></p>
<p>Let‚Äôs create an API key, By clicking on your profile and clicking settings.</p>
<p>Now click on API from the left side panel. Now click on create</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment36.png" /></p>
<p>Click on Developer and Now you have to accept the terms and conditions. and Provide basic details.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment37.png" /></p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment38.png" /></p>
<p>Click on submit and you will get your API key.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment39.png" /></p>
<p>Let‚Äôs add the below step to the workflow , You have to add API at the Build command , Change your username also.</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment40.png" /></p>
<p>t started the workflow build , Click on Build, Analyze and Scan. You will see this Docker image is building now and Build Succeeded</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment41.png" /></p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment42.png" /></p>
<p>Build Succeeded</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment43.png" /></p>
<p>If you go to your Docker hub, you will find that the image is pushed to Dockerhub</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment44.png" /></p>
<h2 id="step-7-add-a-self-hosted-runner-to-ec2">‚ú® Step-7-Add-a-self-hosted-runner-to-EC2</h2>
<p>Go to GitHub and click on Settings ‚Üí Actions ‚Üí Runners</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment45.png" /></p>
<p>Click on New self-hosted runner</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment46.png" /></p>
<p>Now select Linux and Architecture X64</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment47.png" /></p>
<p>Use the below commands to add a self-hosted runner</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment48.png" /></p>
<pre><code class="language-bash">  Picture to be changed. put the code here

</code></pre>
<p>Go to Putty or Mobaxterm and connect to your ec2 instance and copy paste the commands</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment49.png" /></p>
<p>Let‚Äôs start runner</p>
<pre><code class="language-bash">  ./run.sh

</code></pre>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment50.png" /></p>
<h2 id="step-8-final-workflow-to-run-the-container">‚ú® Step-8-Final-workflow-to-run-the-container</h2>
<p>Let‚Äôs add a deployment workflow</p>
<pre><code class="language-bash">
    deploy:    
        needs: build-analyze-scan  
        runs-on: [aws-netflix]  
        steps:
          - name: Pull the docker image
            run: docker pull sushantkapare1717/netflix:latest
          - name: Trivy image scan
            run: trivy image sushantkapare1717/netflix:latest
          - name: Run the container netflix
            run: docker run -d --name netflix -p 8081:80 sushantkapare1717/netflix:latest

</code></pre>
<ol>
<li>
<p><code>deploy</code>: This is the name of a workflow or job, likely associated with a CI/CD pipeline. It specifies what should happen when this deployment job is triggered.</p>
</li>
<li>
<p><code>needs: build-analyze-scan</code>: This line indicates that this deployment job depends on the successful completion of a previous job named "build-analyze-scan." In other words, it waits for "build-analyze-scan" to finish before starting.</p>
</li>
<li>
<p><code>runs-on: [aws-netflix]</code>: This job is set to run on a specific type of runner or environment, labeled as "aws-netflix." Runners are the environments where jobs are executed, and "aws-netflix" suggests that this deployment might be intended for an AWS-based infrastructure.</p>
</li>
<li>
<p><code>steps</code>: This section lists the individual steps or tasks to be executed as part of the deployment job.</p>
<ul>
<li>
<p><code>name: Pull the docker image</code>: This step has a descriptive name. It uses the <code>docker pull</code> command to fetch a Docker image labeled "sushantkapare1717/netflix:latest." This is a common step in container-based deployments, where it ensures that the latest version of the Docker image is available locally.</p>
</li>
<li>
<p><code>name: Trivy image scan</code>: This step performs a security scan on the Docker image "sushantkapare1717/netflix:latest" using a tool called Trivy. Trivy is used for vulnerability scanning of container images.</p>
</li>
<li>
<p><code>name: Run the container netflix</code>: This step starts a Docker container named "netflix" using the image "sushantkapare1717/netflix:latest." It runs the container in detached mode ("-d") and maps port 8081 on the host to port 80 in the container, making the service accessible via port 8081 on the host.</p>
</li>
</ul>
</li>
</ol>
<p>This workflow is designed to automate the deployment of a Docker container, with checks for the latest image, a security scan, and launching the container. The success of this job depends on the success of the preceding ‚Äúbuild-analyze-scan‚Äù job, and it‚Äôs meant to be executed on the specified runner, possibly in an AWS environment.</p>
<p>Commit changes</p>
<p>You will see two different Jobs now</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment51.png" /></p>
<p>Now come back by clicking on Summary and click on Deploy now</p>
<p>It starts running the job on your Ec2 instance</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment52.png" /></p>
<p>On GitHub, you will see this. the build succeeded</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment53.png" /></p>
<p>Now copy your ec2 instance ip and go to the browser</p>
<pre><code class="language-bash">
    &lt;Ec2-instance-ip:8081&gt;

</code></pre>
<p>You will see Netflix app will run</p>
<p><img alt="alt diagram" src="../assets/images/netflix-ish-deployment/netflix-ish-deployment54.png" /></p>
<p>FULL WORKFLOW</p>
<pre><code class="language-bash">
    name: Build,Analyze,scan

    on:
      push:
        branches:
          - main


    jobs:
      build:
        name: Build
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
            with:
              fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis
          - uses: sonarsource/sonarqube-scan-action@master
            env:
              SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
              SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}

          - name: install trivy
            run: |
                #install trivy
                sudo apt-get install wget apt-transport-https gnupg lsb-release -y
                wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | gpg --dearmor | sudo tee /usr/share/keyrings/trivy.gpg &gt; /dev/null
                echo &quot;deb [signed-by=/usr/share/keyrings/trivy.gpg] https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main&quot; | sudo tee -a /etc/apt/sources.list.d/trivy.list
                sudo apt-get update
                sudo apt-get install trivy -y
                #command to scan files
                trivy fs .

          - name: Docker build and push
            run: |
                  #run commands to build and push docker images
                  docker build --build-arg TMDB_V3_API_KEY=e488ef946523a124190a363c8f008cdd -t netflix .
                  docker tag netflix sushantkapare1717/netflix:latest
                  docker login -u ${{ secrets.DOCKERHUB_USERNAME }} -p ${{ secrets.DOCKERHUB_TOKEN }}
                  docker push sushantkapare1717/netflix:latest  
            env:
                  DOCKER_CLI_ACI: 1
      deploy:    
        needs: build  
        runs-on: [aws-netflix]  
        steps:
          - name: Pull the docker image
            run: docker pull sushantkapare1717/netflix:latest
          - name: Trivy image scan
            run: trivy image sushantkapare1717/netflix:latest
          - name: Run the container netflix
            run: docker run -d --name netflix -p 8081:80 sushantkapare1717/netflix:latest

</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
    
  </body>
</html>